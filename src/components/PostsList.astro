---
import dayjs from 'dayjs'

const allPosts = [...await Astro.glob('../pages/posts/*.md')];

let postCount: string = "";

if(allPosts.length === 0) {
    postCount = String(allPosts.length + " posts");
} else if(allPosts.length === 1) {
    postCount = String(allPosts.length + " post");
} else {
    postCount = String(allPosts.length + " posts");
}
---

<div class="posts-list-container">
    <h1 class="posts-list-heading">Blog 
        <span id="post-count">
            ({postCount})
        </span>
    </h1>
    {
    allPosts.reverse().map((post) =>
        <div class="post">
            <li class="post-li">
                <a href={post.url} class="post-a">{post.frontmatter.title}</a>
            </li>
            <div class="post-date">
                {dayjs(post.frontmatter.pubDate).format('MMMM DD, YYYY')}
            </div>
        </div>
      )
    }
</div>

<style>
    @font-face {
        font-family: 'Inter-Regular';
        src: url('../styles/fonts/Inter-Regular.ttf');
    }
    @font-face {
        font-family: 'Inter-Bold';
        src: url('../styles/fonts/Inter-Bold.ttf');
    }

    .posts-list-container {
        position: relative;
        width: 640px;
        /*border: 1px solid black;*/
        margin: 0 auto;
        top: 85px;
        bottom: 85px;
        font-size: 18px;
    }

    .post-date {
        padding-top: 5px;
        padding-bottom: 10px;
        font-family: 'Inter-Regular';
        font-size: 14px;
    }

    .posts-list-heading {
        font-family: 'Inter-Bold';
    }
    #post-count {
        font-family: 'Inter-Regular';
        font-size: 18px;
    }

    .post-li {
        list-style: none;
        font-family: 'Inter-Regular';
    }

    .post-a {
        text-decoration: none;
        color: #5C6BC0;
    }
</style>